(()=>{"use strict";var t,e,s,i,o={972:(t,e,s)=>{s.a(t,(async(t,e)=>{try{var i=s(205),o=s(500),n=s(508),a=s(344),r=s(252);(0,i.Z)(),(0,o.Z)(),(0,r.Z)(),(0,a.Z)(),await(0,n.Z)(),e()}catch(t){e(t)}}),1)},823:(t,e,s)=>{s.d(e,{Z:()=>r});var i=s(710),o=s(839),n=s(689);async function a(){(new o.Z).setAuthorized(!1),(new n.Z).showGoodbye();const t=new r;t.setAuthorized(!1),t.clearUserData(),localStorage.removeItem("hash")}class r{constructor(){this.authorization=document.querySelector(".authorization"),this.name=this.authorization.querySelector(".authorization__name"),this.avatar=this.authorization.querySelector(".authorization__avatar"),this.login=this.authorization.querySelector(".authorization__login"),this.loggedin=this.authorization.querySelector(".authorization__loggedin"),this.logout=this.authorization.querySelector(".authorization__logout")}define(){this.defineLogin(),this.defineLogout()}setAuthorized(t){if(t)return this.loggedin.style.display="flex",void(this.login.style.display="none");this.loggedin.style.display="none",this.login.style.display="initial"}setUserData({username:t,name:e,avatar:s}){if(this.name.innerHTML=e,this.authorization.setAttribute("key",t),!s)return this.avatar.src="./img/authorization/authorization-avatar.png";this.avatar.src=this.convertDriveImgUrl(s)}convertDriveImgUrl(t){if(t.includes("drive.google.com"))return`https://drive.google.com/uc?id=${t.split("/d/")[1].split("/view?")[0]}`}clearUserData(){this.avatar.src="./img/authorization/authorization-avatar.png",this.name.innerHTML="",this.authorization.removeAttribute("key")}getKey(){return this.authorization.getAttribute("key")}defineLogin(){this.login.onclick=()=>(new i.Z).show()}defineLogout(){this.logout.onclick=a}}},752:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(505),o=s(861);class n{constructor(){this.comments=document.querySelector(".comments"),this.commentsContent=this.comments.querySelector(".comments__content")}clear(){this.commentsContent.innerHTML=""}updateCommentData(t,e){const s=this.commentsContent.querySelector(`.comments__item[key="${t}"]`),{type:o,isActive:n,text:a,...r}=e,{responsible:c,editor:l,edited:h}=r,d=`${o[0].toUpperCase()}${o.slice(1)}\nCreated by: ${c}\nEdited: ${(0,i.Z)(h)}\nEditor: ${l}`;s.setAttribute("type",o),s.setAttribute("title",d),s.setAttribute("isActive",n),s.innerHTML=a}addComment(t){const[e,s]=t,{parent:i,key:o}=s;if(i===o)return this.addCommentToElement(this.commentsContent,{commentKey:e,...s});const n=this.commentsContent.querySelector(`.comments__item[key="${i}"]`).closest(".comments__details");this.addCommentToElement(n,{commentKey:e,...s})}addCommentToElement(t,e){const{commentKey:s,type:n,isActive:a,text:r,...c}=e,{responsible:l,editor:h,edited:d}=c,u=`${n[0].toUpperCase()}${n.slice(1)}\nCreated by: ${l}\nEdited: ${(0,i.Z)(d)}\nEditor: ${h}`,m=document.createElement("details");m.className="comments__details",m.innerHTML=`\n      <summary \n        class="comments__item"\n        key="${s}"\n        type="${n}"\n        isActive="${a}"\n        title="${u}"\n      >\n        ${r}\n      </summary>\n    `,t.appendChild(m),m.querySelector(".comments__item").oncontextmenu=t=>{t.preventDefault();const e=t.clientX,i=t.clientY,n=t.srcElement;new o.Z(n).show(e,i,s,a)}}}},861:(t,e,s)=>{s.d(e,{Z:()=>h});var i=s(880),o=s(738),n=s(90),a=s(752),r=s(689),c=s(839),l=s(680);class h{constructor(t){this.context=document.querySelector(".context"),this.edit=this.context.querySelector(".context__item_edit"),this.open=this.context.querySelector(".context__item_open"),this.close=this.context.querySelector(".context__item_close"),this.reply=this.context.querySelector(".context__item_reply"),t&&(this.comment=t,this.isActive=!!+this.comment.getAttribute("isActive"),this.key=this.comment.getAttribute("key"))}define(){document.addEventListener("click",this.hide)}show(t,e){this.open.onclick=this.onSwitchState,this.close.onclick=this.onSwitchState,this.edit.onclick=this.onEdit,this.reply.onclick=this.onReply,this.isActive?(this.open.setAttribute("disabled",""),this.close.removeAttribute("disabled")):(this.open.removeAttribute("disabled"),this.close.setAttribute("disabled","")),this.context.style.left=`${t}px`,this.context.style.top=`${e}px`,this.context.style.opacity="0",this.context.style.display="block",this.context.style.opacity="1"}hide=()=>{this.context.style.opacity="0",this.context.style.display="none"};onSwitchState=()=>{const t=localStorage.getItem("hash"),e=new n.Z;e.setCommentsLoading(!0),e.setButtonsNotEnabled(!0),(new o.Z).swithCommentState({key:this.key,hash:t}).then((t=>{if((0,i._)(t))return(new r.Z).showServerError(t.error);const{comment:s,task:o}=t.data;(new a.Z).updateCommentData(this.key,s);const n=(new c.Z).getRow(s.key);new l.Z(n).updateRowData(o),e.setCommentsLoading(!1),e.setButtonsNotEnabled(!1)}))};onEdit=()=>{console.log(this.key)};onReply=()=>{console.log(this.key)}}},689:(t,e,s)=>{s.d(e,{Z:()=>i});class i{POPUP_TIMEOUT=2500;WARNING_TITLE="Warning âš ";SERVER_ERROR_MESSAGE="Houston, we have a problem.";DENIED_MESSAGE="Access Deined. Please try to check your login and password.";WELCOME_MESSAGE="We are glad to see you again.";GOODBYE_MESSAGE="See you next time, my friend.";UNAUTHORIZED_MESSAGE="User is not authorized.";BUSY_MESSAGE="Selected task is Busy with another user.";SAVED_MESSAGE="Your comments have been saved successfully.";FINISHED_MESSAGE="The Task has been marked as Finished.";ACCEPTED_MESSAGE="The Task has been marked as Accepted.";constructor(){this.popup=document.querySelector(".popup"),this.close=this.popup.querySelector(".popup__close"),this.title=this.popup.querySelector(".popup__title"),this.content=this.popup.querySelector(".popup__content")}define(){this.defineClose()}showServerError(t=void 0){if(!t)return this.showWarning(this.SERVER_ERROR_MESSAGE);this.showWarning(`${this.SERVER_ERROR_MESSAGE} ${t}`),console.log(t)}showAccessDenied(){this.showWarning(this.DENIED_MESSAGE)}showWelcome(){this.show("Welcome!",this.WELCOME_MESSAGE)}showGoodbye(){this.show("Goodbye!",this.GOODBYE_MESSAGE)}showUnauthorized(){this.showWarning(this.UNAUTHORIZED_MESSAGE)}showBusy(){this.showWarning(this.BUSY_MESSAGE)}showCommentSaved(){this.show("Done!",this.SAVED_MESSAGE)}showTaskFinished(){this.show("Finished!",this.FINISHED_MESSAGE)}showTaskAccepted(){this.show("Accepted!",this.ACCEPTED_MESSAGE)}showWarning(t){this.show(this.WARNING_TITLE,t)}show(t,e){this.title.innerHTML=t,this.content.innerHTML=e,this.popup.style.right="20px",setTimeout((()=>{this.popup.style.right="-320px"}),this.POPUP_TIMEOUT)}defineClose(){this.close.onclick=()=>this.popup.style.right="-320px"}}},839:(t,e,s)=>{s.d(e,{Z:()=>u});var i=s(738),o=s(680),n=s(689),a=s(880);async function r(t){const e=new n.Z,s=localStorage.getItem("hash");if(!s)return e.showUnauthorized();const r=new o.Z(t.srcElement),c=r.getKey();r.setLoadingActivityState();const l={key:c,hash:s},h=await(new i.Z).taskActivityClick(l);if((0,a._)(h))return r.setPreviousActivityState(),e.showServerError(h.error);const[d,m]=h.data;if(r.updateRowData(d),m){const{key:t,...e}=m,s=(new u).getRow(t);new o.Z(s).updateRowData(e)}return r.isActive()?(new u).setOtherActiveTasksState(c,"NOT_ACTIVE"):r.isBusy()?e.showBusy():void 0}var c=s(90),l=s(209),h=s(823),d=s(505);class u{constructor(){this.listClass="tasks__list",this.rowClass="row",this.actionContentClass="row__action-content",this.block=document.querySelector(".tasks"),this.isAuthorized=(new h.Z).getKey(),this.actions={edit:{class:this.actionContentClass,modifier:void 0,title:"Edit",alt:"tasks-edit",src:"img/tasks/tasks-edit.png",onclick:this.onEditClick},comment:{class:this.actionContentClass,modifier:void 0,title:"Comment",alt:"tasks-comment",src:"img/tasks/tasks-comment.png",onclick:this.onCommentClick},start:{class:this.actionContentClass,modifier:"row__action-content_start",title:"Start",alt:"tasks-start",src:"img/tasks/tasks-start.png",onclick:this.onStartClick},pause:{class:this.actionContentClass,modifier:"row__action-content_pause",title:"Pause",alt:"tasks-pause",src:"img/tasks/tasks-pause.png",onclick:this.onStartClick},busy:{class:this.actionContentClass,modifier:"row__action-content_busy",title:"Busy",alt:"tasks-busy",src:"img/tasks/tasks-busy.png"},loader:{class:"row__loader",modifier:"row__action-content_loading",title:"Loading"}}}addTable(){this.list=document.createElement("div"),this.list.classList.add(this.listClass),this.block.replaceChildren(this.list)}addRow([t,e]){const s=this.createRow(t);s.appendChild(this.createRowLogo());const[i,o,n,a,r,...c]=Object.entries(e);[i,o,n].forEach((t=>s.appendChild(this.createCell(t)))),s.appendChild(this.createUpdated(a,r)),c.forEach((t=>s.appendChild(this.createState(t)))),s.appendChild(this.createIndicators()),s.appendChild(this.createRowActions()),this.list.appendChild(s)}getRow(t){const e=document.querySelector(`.${this.listClass}`),s=`.${this.rowClass}[key='${t}']`;return e.querySelector(s)}setAuthorized(t){const e=document.querySelector(`.${this.listClass}`);e&&Array.from(e.children).forEach((e=>{new o.Z(e).setAuthorized(t)}))}setOtherActiveTasksState(t,e){const s=document.querySelector(`.${this.listClass}`);s&&Array.from(s.children).forEach((s=>{const i=new o.Z(s),n=i.getKey(),a=i.getActivityState();if(n===t)return i.setActivityState(i.STATE.ACTIVE);a===i.STATE.ACTIVE&&i.setActivityState(i.STATE[e])}))}createRow(t){const e=document.createElement("div");return e.classList.add(this.rowClass),e.setAttribute("key",t),e}createRowLogo(){return Object.assign(document.createElement("div"),{className:"row__logo",innerHTML:'<img\n      // src="img/tasks/tasks-marker.png"\n      // alt="tasks-marker"\n      // ></img>'})}createCell([t,e]){"edited"===t&&(e=(0,d.Z)(e));const s=document.createElement("div");s.classList.add("row__cell"),s.classList.add(`row__cell_${t}`),s.setAttribute("title",e),s.setAttribute("key",t);const i=document.createElement("div");return i.classList.add("row__cell-content"),i.innerHTML=e,s.appendChild(i),s}createState([t,e]){const s=document.createElement("div");return s.classList.add("row__state"),s.classList.add(`row__state_${t}`),s.setAttribute("title",e),s.setAttribute("key",t),s}createUpdated(t,e){const s=document.createElement("div");return s.classList.add("row__updated"),s.appendChild(this.createCell(e)),s.appendChild(this.createCell(t)),s}createIndicators(){const t=document.createElement("div");t.classList.add("row__indicators");const e=document.createElement("div");e.classList.add("row__indicator"),e.classList.add("row__indicator_notes");const s=document.createElement("div");s.classList.add("row__indicator"),s.classList.add("row__indicator_comments");const i=document.createElement("div");return i.classList.add("row__indicator"),i.classList.add("row__indicator_questions"),t.appendChild(e),t.appendChild(s),t.appendChild(i),t}createRowActions(){const t=document.createElement("div");return t.classList.add("row__actions"),this.isAuthorized&&(t.style.display="flex"),t.appendChild(this.createAction("edit")),t.appendChild(this.createAction("comment")),t.appendChild(this.createAction("start")),t}createAction(t){const e=document.createElement("div");return e.classList.add("row__action"),e.appendChild(this.createActionContent(t)),"start"!==t||(e.appendChild(this.createActionContent("pause")),e.appendChild(this.createActionContent("busy")),e.appendChild(this.createActionContent("loader"))),e}createActionContent(t){const e=document.createElement("img");return e.classList.add(this.actions[t].class),this.actions[t].modifier&&e.classList.add(this.actions[t].modifier),"loader"===t||(e.setAttribute("src",this.actions[t].src),e.setAttribute("alt",this.actions[t].alt),e.setAttribute("title",this.actions[t].title),"busy"===t||(e.onclick=this.actions[t].onclick)),e}onEditClick=t=>(new c.Z).show(t);onCommentClick=t=>(new l.Z).show(t);onStartClick=r}},680:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(505);class o{HEADERS={IS_ACTIVE:"isActive",IS_FINISHED:"isFinished",IS_WRONG:"isWrong",IS_ACCEPTED:"isAccepted"};STATE={ACTIVE:"1",NOT_ACTIVE:"0",LOADING:".",BUSY:"x"};constructor(t){this.row=t.closest(".row"),this.key=this.row.getAttribute("key")}getKey(){return this.key}getCellData(t){return this.row.querySelector(`.row__cell[key=${t}]`).getAttribute("title")}getStateData(t){return this.row.querySelector(`.row__state[key=${t}]`).getAttribute("title")}updateCellData(t,e){const s=this.row.querySelector(`.row__cell[key=${t}]`);s.setAttribute("title",e),s.querySelector(".row__cell-content").innerHTML=e}updateState(t,e){this.row.querySelector(`.row__state[key=${t}]`).setAttribute("title",e)}updateRowData({number:t,name:e,responsible:s,editor:o,edited:n,...a}){Object.entries({number:t,name:e,responsible:s,editor:o,edited:n}).forEach((([t,e])=>{"edited"===t&&(e=(0,i.Z)(e)),this.updateCellData(t,e)})),Object.entries(a).forEach((([t,e])=>this.updateState(t,e)))}setAuthorized(t){const e=this.row.querySelector(".row__actions");if(t)return e.style.display="flex";e.style.display="none"}getActivityState(){return this.getStateData(this.HEADERS.IS_ACTIVE)}setLoadingActivityState(){this.previousActivityState=this.getActivityState(),this.setActivityState(this.STATE.LOADING)}setPreviousActivityState(){this.setActivityState(this.previousActivityState)}setActivityState(t){this.updateState(this.HEADERS.IS_ACTIVE,t)}isBusy(){return this.getActivityState()===this.STATE.BUSY}isActive(){return this.getActivityState()===this.STATE.ACTIVE}}},738:(t,e,s)=>{s.d(e,{Z:()=>i});class i{SCRIPT_ID="AKfycbxOnoR3KrFWInXrAukFyw8beYsUanTtR8gCd6r8xv7-927TQKxbR4C9LuaqjjNa6YXpXA";TASKS_SHEET="TASKS";USERS_SHEET="USERS";TIME_SHEET="TIME";constructor(){this.baseUrl=`https://script.google.com/macros/s/${this.SCRIPT_ID}/exec`}async requestTasks(t){const e={action:"tasksAuth",data:{hash:t}};return this.post(this.baseUrl,e)}async login(t){const e={action:"login",data:t};return this.post(this.baseUrl,e)}async taskActivityClick(t){const e={action:"task",data:t};return this.post(this.baseUrl,e)}async setTaskFinished(t){const e={action:"finished",data:t};return this.post(this.baseUrl,e)}async setTaskAccepted(t){const e={action:"accepted",data:t};return this.post(this.baseUrl,e)}async addComment(t){const e={action:"comment",data:t};return this.post(this.baseUrl,e)}async swithCommentState(t){const e={action:"commentState",data:t};return this.post(this.baseUrl,e)}async getTimeCommentsData(t){const e={action:"edit",data:t};return this.post(this.baseUrl,e)}async post(t,e){const s=this.getPostOptions(e);return(await fetch(t,s)).json()}getPostOptions(t){return{redirect:"follow",method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(t)}}}},209:(t,e,s)=>{s.d(e,{Z:()=>h});var i=s(689),o=s(839),n=s(680),a=s(738),r=s(90),c=s(880);async function l(){const t=new i.Z,e=new h,s=e.getTaskKey(),l=localStorage.getItem("hash");if(!l)return t.showUnauthorized();if(e.areInputsNotValid())return;const d={key:s,parent:s,hash:l,...e.getData()};e.setLoading(!0);const u=await(new a.Z).addComment(d);if(e.setLoading(!1),(0,c._)(u))return t.showServerError(u.error);const m=(new o.Z).getRow(s);new n.Z(m).updateRowData(u.data);const y=new r.Z;y.isShown()&&y.setProfileByData(u.data),t.showCommentSaved()}class h{TEXT_VALID_MESSAGE="Remark can't be blank";SELECT_VALID_MESSAGE="Select Remark type";LOADING_ATTRIBUTE="isLoading";LOADING_STATE="1";constructor(){this.modal=document.querySelector(".modal_comment"),this.close=this.modal.querySelector(".modal__close"),this.description=this.modal.querySelector(".modal__description"),this.form=this.modal.querySelector(".comment-form"),this.text=this.form.querySelector(".comment-form__textarea"),this.select=this.form.querySelector(".comment-form__select"),this.saveButton=this.form.querySelector(".comment-form__button_save"),this.resetButton=this.form.querySelector(".comment-form__button_reset")}define(){this.defineClose(),this.defineTextValidation(),this.defineSelectValidation(),this.defineSaveAction()}show(t){const e=new n.Z(t.srcElement);this.setWindowDescriptionByRow(e),this.setWindowKeyByRow(e),this.form.reset(),this.modal.style.display="flex"}setWindowDescriptionByRow(t){const e=t.getCellData("number"),s=t.getCellData("name");this.description.innerHTML=`${e} ${s}`}setWindowKeyByRow(t){const e=t.getKey();this.form.setAttribute("key",e)}setLoading(t){if(t)return this.saveButton.style.pointerEvents="none",this.resetButton.style.pointerEvents="none",void this.form.setAttribute(this.LOADING_ATTRIBUTE,this.LOADING_STATE);this.form.reset(),this.saveButton.style.pointerEvents="auto",this.resetButton.style.pointerEvents="auto",this.form.removeAttribute(this.LOADING_ATTRIBUTE)}getData(){return{type:this.select.value,text:this.text.value}}areInputsNotValid(){return!this.text.validity.valid||!this.select.validity.valid}getTaskKey(){return this.form.getAttribute("key")}defineClose(){this.close.onclick=()=>this.modal.style.display="none"}defineTextValidation(){this.text.oninvalid=t=>t.target.setCustomValidity(this.TEXT_VALID_MESSAGE),this.text.oninput=t=>t.target.setCustomValidity("")}defineSelectValidation(){this.select.oninvalid=t=>t.target.setCustomValidity(this.SELECT_VALID_MESSAGE),this.select.oninput=t=>t.target.setCustomValidity("")}defineSaveAction(){this.saveButton.onclick=l}}},90:(t,e,s)=>{s.d(e,{Z:()=>m});var i=s(689),o=s(839),n=s(680),a=s(738),r=s(880);async function c(){const t=new m,e=t.getKeyHash(),{key:s,hash:c}=e,l=new i.Z;if(!c)return l.showUnauthorized();t.setAcceptLoading(!0);const h=await(new a.Z).setTaskAccepted(e);if(t.setAcceptLoading(!1),(0,r._)(h))return l.showServerError(h.error);const d=(new o.Z).getRow(s),u=new n.Z(d);if(u.updateRowData(h.data),t.setProfileByData(h.data),h.data.isActive===u.STATE.BUSY)return l.showBusy();l.showTaskAccepted()}async function l(){const t=new m,e=t.getKeyHash(),{key:s,hash:c}=e,l=new i.Z;if(!c)return l.showUnauthorized();t.setFinishLoading(!0);const h=await(new a.Z).setTaskFinished(e);if(t.setFinishLoading(!1),(0,r._)(h))return l.showServerError(h.error);const d=(new o.Z).getRow(s),u=new n.Z(d);if(u.updateRowData(h.data),t.setProfileByData(h.data),h.data.isActive===u.STATE.BUSY)return l.showBusy();l.showTaskFinished()}var h=s(505),d=s(752),u=s(209);class m{constructor(){this.modal=document.querySelector(".modal_edit"),this.close=this.modal.querySelector(".modal__close"),this.description=this.modal.querySelector(".modal__description"),this.state=this.modal.querySelector(".edit__state"),this.editor=this.modal.querySelector(".edit__editor"),this.edited=this.modal.querySelector(".edit__edited"),this.responsible=this.modal.querySelector(".edit__responsible"),this.finishButton=this.modal.querySelector(".edit__button_finish"),this.finishLoader=this.modal.querySelector(".edit__loader_finish"),this.acceptButton=this.modal.querySelector(".edit__button_accept"),this.acceptLoader=this.modal.querySelector(".edit__loader_accept"),this.commentButton=this.modal.querySelector(".edit__button_comment"),this.time=this.modal.querySelector(".time"),this.timeTotal=this.modal.querySelector(".time__total"),this.timeLoader=this.modal.querySelector(".time__loader"),this.timeGrid=this.modal.querySelector(".time__grid"),this.commentsLoader=this.modal.querySelector(".comments__loader"),this.commentsContent=this.modal.querySelector(".comments__content")}define(){this.defineClose()}show(t){this.setLoading(!0),this.defineClickListeners(t);const e=new n.Z(t.srcElement);this.setWindowDescriptionByRow(e),this.setWindowKeyByRow(e),this.setProfileByRow(e),this.setAllDetailsClosed(),this.getTimeCommentsData(),(new d.Z).clear(),this.modal.style.display="flex"}hide(){this.modal.style.display="none"}getTimeCommentsData(){const{key:t}=this.getKeyHash();(new a.Z).getTimeCommentsData({key:t}).then((e=>{if(!this.isShown())return;if(t!=this.getKeyHash().key)return;if((0,r._)(e))return(new i.Z).showServerError(e.error);const{time:s,comments:o}=e.data;s&&o&&(this.setTime(s),this.setComments(o),this.setLoading(!1))}))}setTime(t){const{total:e,data:s}=t;this.timeTotal.innerHTML=e||0,this.timeGrid.innerHTML=s?s.map((t=>`<p>${t}</p>`)).join(""):["Current task","is not started"].map((t=>`<p>${t}</p>`)).join("")}setComments(t){const e=new d.Z;t.forEach((t=>e.addComment(t)))}isShown(){return"none"!==this.modal.style.display}setProfileByRow(t){const e={responsible:t.getCellData("responsible"),editor:t.getCellData("editor"),edited:t.getCellData("edited"),isActive:t.getStateData(t.HEADERS.IS_ACTIVE),isFinished:t.getStateData(t.HEADERS.IS_FINISHED),isAccepted:t.getStateData(t.HEADERS.IS_ACCEPTED),isWrong:t.getStateData(t.HEADERS.IS_WRONG)};this.setProfileByData(e)}setProfileByData(t){const{responsible:e,editor:s,edited:i,isActive:o,isFinished:n,isAccepted:a,isWrong:r}=t;return this.editor.innerHTML=s,this.edited.innerHTML=i.includes("-")?i:(0,h.Z)(i),this.responsible.innerHTML=e,"x"===o?this.state.innerHTML="BUSY":+a?this.state.innerHTML="ACCEPTED":+r?this.state.innerHTML="TO BE FIXED":+n?this.state.innerHTML="FINISHED":+o?this.state.innerHTML="ACTIVE":void(this.state.innerHTML="NOT ACTIVE")}setWindowDescriptionByRow(t){const e=t.getCellData("number"),s=t.getCellData("name");this.description.innerHTML=`${e} ${s}`}setWindowKeyByRow(t){const e=t.getKey();this.modal.setAttribute("key",e)}setAllDetailsClosed(){const t=this.modal.getElementsByTagName("details");Array.from(t).forEach((t=>t.open=!1))}setFinishLoading(t){if(this.setButtonsNotEnabled(t),t)return this.finishLoader.style.display="block",void(this.finishButton.style.color="transparent");this.finishLoader.style.display="none",this.finishButton.style.color="initial"}setAcceptLoading(t){if(this.setButtonsNotEnabled(t),t)return this.acceptLoader.style.display="block",void(this.acceptButton.style.color="transparent");this.acceptLoader.style.display="none",this.acceptButton.style.color="initial"}setLoading(t){this.setTimeLoading(t),this.setCommentsLoading(t),this.setButtonsNotEnabled(t)}setTimeLoading(t){if(t)return this.time.style.pointerEvents="none",this.timeTotal.style.opacity="0",void(this.timeLoader.style.display="flex");this.timeTotal.style.opacity="1",this.timeLoader.style.display="none",this.time.style.pointerEvents="auto"}setCommentsLoading(t){if(t)return this.commentsLoader.style.display="block",this.commentsContent.style.pointerEvents="none",void(this.commentsContent.style.opacity="0");this.commentsLoader.style.display="none",this.commentsContent.style.opacity="1",this.commentsContent.style.pointerEvents="auto"}setButtonsNotEnabled(t){if(t)return this.commentButton.style.pointerEvents="none",this.acceptButton.style.pointerEvents="none",void(this.finishButton.style.pointerEvents="none");this.commentButton.style.pointerEvents="auto",this.acceptButton.style.pointerEvents="auto",this.finishButton.style.pointerEvents="auto"}getKeyHash(){return{key:this.modal.getAttribute("key"),hash:localStorage.getItem("hash")}}defineClose(){this.close.onclick=()=>this.hide()}defineClickListeners(t){this.commentButton.onclick=()=>(new u.Z).show(t),this.finishButton.onclick=l,this.acceptButton.onclick=c}}},710:(t,e,s)=>{s.d(e,{Z:()=>l});var i=s(738),o=s(823),n=s(839),a=s(689),r=s(880);async function c(){const t=new l;if(t.areInputsNotValid())return;t.setLoading(!0);const e=t.getUserData(),s=await(new i.Z).login(e);t.setLoading(!1);const c=new a.Z;if((0,r._)(s))return c.showServerError(s.error);if((0,r.$)(s))return c.showAccessDenied();const{user:h}=s.data,{active:d,hash:u}=h,m=new n.Z;m.setAuthorized(!0),m.setOtherActiveTasksState(d,"BUSY");const y=new o.Z;y.setUserData(h),y.setAuthorized(!0),localStorage.setItem("hash",u),c.showWelcome(),t.hide()}class l{EMAIL_VALID_MESSAGE="Wrong Email format.";PASSWORD_VALID_MESAGE="Password can't be blank.";LOADING_ATTRIBUTE="isLoading";LOADING_STATE="1";constructor(){this.modal=document.querySelector(".modal_login"),this.close=this.modal.querySelector(".modal__close"),this.form=this.modal.querySelector(".login-form"),this.email=this.form.querySelector(".login-form__email"),this.button=this.form.querySelector(".login-form__button"),this.password=this.form.querySelector(".login-form__password")}define(){this.defineClose(),this.defineEmailValidation(),this.definePasswordValidation(),this.defineLoginAction()}show(){this.form.reset(),this.modal.style.display="flex"}hide(){this.modal.style.display="none"}areInputsNotValid(){return!this.email.validity.valid||!this.password.validity.valid}setLoading(t){if(t)return this.button.style.pointerEvents="none",void this.form.setAttribute(this.LOADING_ATTRIBUTE,this.LOADING_STATE);this.form.reset(),this.button.style.pointerEvents="auto",this.form.removeAttribute(this.LOADING_ATTRIBUTE)}getUserData(){return{login:this.email.value,password:this.password.value}}defineClose(){this.close.onclick=()=>this.modal.style.display="none"}defineEmailValidation(){this.email.oninvalid=t=>t.target.setCustomValidity(this.EMAIL_VALID_MESSAGE),this.email.oninput=t=>t.target.setCustomValidity("")}definePasswordValidation(){this.password.oninvalid=t=>t.target.setCustomValidity(this.PASSWORD_VALID_MESAGE),this.password.oninput=t=>t.target.setCustomValidity("")}defineLoginAction(){this.button.onclick=c}}},344:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(823);function o(){(new i.Z).define()}},252:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(861);function o(){(new i.Z).define()}},500:(t,e,s)=>{s.d(e,{Z:()=>r});var i=s(710),o=s(209),n=s(90),a=s(689);function r(){const t=new i.Z,e=new o.Z,s=new n.Z,r=new a.Z;t.define(),e.define(),s.define(),r.define()}},205:(t,e,s)=>{function i(){var t,e;t=function(t){let e=t?"webp":"no-webp";document.documentElement.classList.add(e)},(e=new Image).onload=e.onerror=function(){t(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}s.d(e,{Z:()=>i})},508:(t,e,s)=>{s.d(e,{Z:()=>l});var i=s(738),o=s(839),n=s(689),a=s(880),r=s(710),c=s(823);async function l(){const t=new r.Z,e=new n.Z;t.setLoading(!0);const s=localStorage.getItem("hash"),l=await(new i.Z).requestTasks(s);if(t.setLoading(!1),(0,a._)(l))return e.showServerError(l.error);const{tasks:h,user:d}=l.data;if(function(t){const e=new o.Z;e.addTable(),Object.entries(t).forEach((t=>e.addRow(t)))}(h),(0,a.$)(l))return localStorage.removeItem("hash");!async function(t){const e=new o.Z;e.setAuthorized(!0),e.setOtherActiveTasksState(t.active,"BUSY");const s=new c.Z;s.setUserData(t),s.setAuthorized(!0)}(d),e.showWelcome(),t.hide()}},505:(t,e,s)=>{function i(t){if(0===t.length)return"";const e=new Date(+t),s=e.getFullYear();let i=e.getMonth()+1;i<10&&(i=`0${i}`);let o=e.getDate();o<10&&(o=`0${o}`);const n=e.getHours();let a=e.getMinutes();a<10&&(a=`0${a}`);let r=e.getSeconds();return r<10&&(r=`0${r}`),`${s}-${i}-${o} ${n}:${a}:${r}`}s.d(e,{Z:()=>i})},880:(t,e,s)=>{function i(t){return"success"!==t.result}function o(t){return"accepted"!==t.data.status}s.d(e,{$:()=>o,_:()=>i})}},n={};function a(t){var e=n[t];if(void 0!==e)return e.exports;var s=n[t]={exports:{}};return o[t](s,s.exports,a),s.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",i=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},a.a=(o,n,a)=>{var r;a&&((r=[]).d=-1);var c,l,h,d=new Set,u=o.exports,m=new Promise(((t,e)=>{h=e,l=t}));m[e]=u,m[t]=t=>(r&&t(r),d.forEach(t),m.catch((t=>{}))),o.exports=m,n((o=>{var n;c=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[t])return o;if(o.then){var n=[];n.d=0,o.then((t=>{a[e]=t,i(n)}),(t=>{a[s]=t,i(n)}));var a={};return a[t]=t=>t(n),a}}var r={};return r[t]=t=>{},r[e]=o,r})))(o);var a=()=>c.map((t=>{if(t[s])throw t[s];return t[e]})),l=new Promise((e=>{(n=()=>e(a)).r=0;var s=t=>t!==r&&!d.has(t)&&(d.add(t),t&&!t.d&&(n.r++,t.push(n)));c.map((e=>e[t](s)))}));return n.r?l:a()}),(t=>(t?h(m[s]=t):l(u),i(r)))),r&&r.d<0&&(r.d=0)},a.d=(t,e)=>{for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a(972)})();