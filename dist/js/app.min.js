(()=>{"use strict";var t,s,e,a,i={972:(t,s,e)=>{e.a(t,(async(t,s)=>{try{var a=e(563),i=e(173),o=e(827);(0,a.Z)(),await(0,i.Z)("tasks"),(0,o.Z)(),s()}catch(t){s(t)}}),1)},827:(t,s,e)=>{e.d(s,{Z:()=>i});var a=e(993);function i(){const t=document.querySelector(".modal"),s=Array.from(t.children);function e(s){const e=new a.Z(s).getActionName();document.querySelector(`.modal__window_${e}`).style.display="flex",t.style.display="flex"}function i(){t.style.display="none",s.forEach((t=>{t.style.display="none"}))}Array.from(document.getElementsByClassName("modal__open")).forEach((t=>t.onclick=e)),Array.from(document.getElementsByClassName("modal__close")).forEach((t=>t.onclick=i))}},993:(t,s,e)=>{e.d(s,{Z:()=>a});class a{constructor(t){this.rowClass="row",this.cellClass=`${this.rowClass}__cell`,this.cellContentClass=`${this.rowClass}__cell-content`,this.actionClass=`${this.rowClass}__action`,this.actionContentClass=`${this.rowClass}__action-content`,this.loaderClass=`${this.rowClass}__loader`,this.actionContent=t.srcElement,this.action=this.actionContent.closest(`.${this.actionClass}`),this.actionName=this.action.getAttribute("key"),this.row=this.actionContent.closest(`.${this.rowClass}`),this.key=this.row.getAttribute("key")}getActionName(){return this.actionName}getKey(){return this.key}getCellData(t){return this.row.querySelector(`.${this.cellClass}[key=${t}]`).querySelector(`.${this.cellContentClass}`).innerHTML}updateCellData(t,s){const e=this.row.querySelector(`.${this.cellClass}[key=${t}]`),a=e.querySelector(`.${this.cellContentClass}`);e.setAttribute("title",s),a.innerHTML=s}setIsLoading(){this.actionContent.style.display="none";const t=this.createLoader();this.action.appendChild(t)}removeIsLoading(){this.actionContent.closest(`.${this.actionClass}`).querySelector(`.${this.loaderClass}`).remove(),this.actionContent.style.display="initial"}createLoader(){const t=document.createElement("span");return t.classList.add(this.loaderClass),t}}},173:(t,s,e)=>{e.d(s,{Z:()=>n});class a{SCRIPT_ID="AKfycbwW1Dx_lkpFncP-7h5O6cG_jpYUJAszOl8TZGyCCZZqh7y1DPm_9jR5ndmyiaKOX3iAxA";constructor(){this.baseUrl=`https://script.google.com/macros/s/${this.SCRIPT_ID}/exec`}async requestTasks(){const t=this.getUrl({sheet:"TASKS"}),s=await fetch(t);return await s.json()}async setCellData(t,s,e){const a=Object.fromEntries([[s,e]]),i={action:"update",data:Object.fromEntries([[t,a]])},o=this.getUrl({sheet:"TASKS"}),n=this.getPostOptions(i),c=await fetch(o,n);return await c.json()}async switchState(t,s,e){const a="0"===e?"1":"0";return await this.setCellData(t,s,a)}getUrl(t){const s=Object.entries(t).filter((t=>!t.includes(void 0))).map((t=>t.join("="))).join("&");return`${this.baseUrl}?${s}`}getPostOptions(t){return{redirect:"follow",method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(t)}}}var i=e(993);class o{constructor(t){this.blockClass=t,this.listClass=`${this.blockClass}__list`,this.headerClass=`${t}__header`,this.hearedRowClass=`${this.headerClass}-row`,this.rowClass="row",this.logoClass=`${this.rowClass}__logo`,this.cellClass=`${this.rowClass}__cell`,this.cellContentClass=`${this.cellClass}-content`,this.indicatorsClass=`${this.rowClass}__indicators`,this.indicatorClass=`${this.rowClass}__indicator`,this.indicatorNotesClass=`${this.indicatorClass}_notes`,this.indicatorCommentsClass=`${this.indicatorClass}_comments`,this.indicatorQuestionClass=`${this.indicatorClass}_questions`,this.actionsClass=`${this.rowClass}__actions`,this.actionClass=`${this.rowClass}__action`,this.actionContentClass=`${this.actionClass}-content`,this.key="key",this.block=document.querySelector(`.${this.blockClass}`),this.actions={edit:{title:"Edit",alt:"tasks-edit",src:"img/tasks/tasks-edit.png",onclick:this.onEditClick},comment:{title:"Comment",alt:"tasks-comment",src:"img/tasks/tasks-comment.png",onclick:this.onCommentClick},start:{title:"Start",alt:"tasks-start",src:"img/tasks/tasks-start.png",onclick:this.onStartClick}}}addTable(){this.list=document.createElement("div"),this.list.classList.add(this.listClass),this.block.replaceChildren(this.list)}addHeader(t){this.header=document.createElement("div"),this.header.classList.add(this.hearedRowClass);const s=Object.keys(Object.values(t)[0]),e=document.createElement("div");e.classList.add(this.logoClass),this.header.appendChild(e),s.forEach((t=>{const s=document.createElement("div");s.classList.add(this.headerClass),s.innerHTML=`${t.toUpperCase()}`,this.header.appendChild(s)}));const a=document.createElement("div");a.classList.add(this.actionsClass),this.header.appendChild(a),this.list.appendChild(this.header)}addRow(t){const[s,e]=t,a=this.createRow(s),i=this.createRowLogo();a.appendChild(i),Object.entries(e).forEach((t=>{const s=this.createCell(t);a.appendChild(s)}));const o=this.createIndicators();a.appendChild(o);const n=this.createRowActions();a.appendChild(n),this.list.appendChild(a)}removeRowById(t){const s=this.list.querySelectorAll(`div[${this.key}='${t}']`);console.log(s),s.forEach((t=>t.remove()))}insertRow(){}createRow(t){const s=document.createElement("div");return s.classList.add(this.rowClass),s.setAttribute(this.key,t),s}createRowLogo(){const t=document.createElement("div");t.classList.add(this.logoClass);const s=document.createElement("img");return s.setAttribute("src","img/tasks/tasks-marker.png"),s.setAttribute("alt","tasks-marker"),t.appendChild(s),t}createCell(t){const[s,e]=t,a=document.createElement("div");a.classList.add(this.cellClass),a.classList.add(`${this.cellClass}_${s}`),a.setAttribute("title",e),a.setAttribute("key",s);const i=document.createElement("div");return i.classList.add(this.cellContentClass),i.innerHTML=e,a.appendChild(i),a}createIndicators(){const t=document.createElement("div");t.classList.add(this.indicatorsClass);const s=document.createElement("div");s.classList.add(this.indicatorClass),s.classList.add(this.indicatorNotesClass);const e=document.createElement("div");e.classList.add(this.indicatorCommentsClass),e.classList.add(this.indicatorClass);const a=document.createElement("div");return a.classList.add(this.indicatorQuestionClass),a.classList.add(this.indicatorClass),t.appendChild(s),t.appendChild(e),t.appendChild(a),t}createRowActions(){const t=document.createElement("div");return t.classList.add(this.actionsClass),t.appendChild(this.createAction("edit")),t.appendChild(this.createAction("comment")),t.appendChild(this.createAction("start")),t}createAction(t){const s=document.createElement("div");s.classList.add(this.actionClass),s.setAttribute("key",t),"start"!==t&&s.classList.add("modal__open");const e=document.createElement("img");return e.classList.add(this.actionContentClass),e.setAttribute("src",this.actions[t].src),e.setAttribute("alt",this.actions[t].alt),e.setAttribute("title",this.actions[t].title),s.appendChild(e),s.onclick=this.actions[t].onclick,s}onEditClick=()=>alert("Default Edit Action");onCommentClick=()=>alert("Default Comment Action");onStartClick=async t=>{const s="isActive",e=new i.Z(t),o=e.getKey(),n=e.getCellData(s);e.setIsLoading();const c=new a,l=await c.switchState(o,s,n);console.log(l);const{result:r,report:d}=l,{value:h}=d;"success"===r&&e.updateCellData(s,h),e.removeIsLoading()}}async function n(t){const s=new a,e=await s.requestTasks(),{result:i,data:n}=e;if("success"===!i)return;const c=new o(t);c.addTable(),Object.entries(n).forEach((t=>c.addRow(t)))}},563:(t,s,e)=>{function a(){var t,s;t=function(t){let s=t?"webp":"no-webp";document.documentElement.classList.add(s)},(s=new Image).onload=s.onerror=function(){t(2==s.height)},s.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}e.d(s,{Z:()=>a})}},o={};function n(t){var s=o[t];if(void 0!==s)return s.exports;var e=o[t]={exports:{}};return i[t](e,e.exports,n),e.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",s="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",e="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},n.a=(i,o,n)=>{var c;n&&((c=[]).d=-1);var l,r,d,h=new Set,C=i.exports,m=new Promise(((t,s)=>{d=s,r=t}));m[s]=C,m[t]=t=>(c&&t(c),h.forEach(t),m.catch((t=>{}))),i.exports=m,o((i=>{var o;l=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[t])return i;if(i.then){var o=[];o.d=0,i.then((t=>{n[s]=t,a(o)}),(t=>{n[e]=t,a(o)}));var n={};return n[t]=t=>t(o),n}}var c={};return c[t]=t=>{},c[s]=i,c})))(i);var n=()=>l.map((t=>{if(t[e])throw t[e];return t[s]})),r=new Promise((s=>{(o=()=>s(n)).r=0;var e=t=>t!==c&&!h.has(t)&&(h.add(t),t&&!t.d&&(o.r++,t.push(o)));l.map((s=>s[t](e)))}));return o.r?r:n()}),(t=>(t?d(m[e]=t):r(C),a(c)))),c&&c.d<0&&(c.d=0)},n.d=(t,s)=>{for(var e in s)n.o(s,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:s[e]})},n.o=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),n(972)})();